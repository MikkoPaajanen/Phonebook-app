(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),c=t.n(u),l=t(14),o=t(2),i=t(3),m=t.n(i),f="/api/persons",d=function(){return m.a.get(f).then((function(e){return e.data}))},s=function(e){return m.a.post(f,e).then((function(e){return e.data}))},b=function(e){return m.a.delete("".concat(f,"/").concat(e))},h=function(e,n){return m.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))};function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}var E=function(e){return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,e.person),r.a.createElement("td",null,e.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:e.removeName},"Delete"))))},v=function(e){return r.a.createElement("form",{onSubmit:e.addPerson},r.a.createElement("div",null,"Name: ",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),r.a.createElement("div",null,"Number: ",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Add")))},O=function(e){return r.a.createElement("div",null,"Filter shown with: ",r.a.createElement("input",{type:"text",value:e.nameExists,onChange:e.handleFilter}))},w=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"succesful"},n)},g=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)},j=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),m=i[0],f=i[1],j=Object(a.useState)(""),y=Object(o.a)(j,2),N=y[0],P=y[1],C=Object(a.useState)(""),S=Object(o.a)(C,2),k=S[0],D=S[1],T=Object(a.useState)(null),A=Object(o.a)(T,2),x=A[0],F=A[1],I=Object(a.useState)(null),J=Object(o.a)(I,2),L=J[0],B=J[1];Object(a.useEffect)((function(){d().then((function(e){u(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(w,{message:x}),r.a.createElement(g,{message:L}),r.a.createElement("div",null,r.a.createElement(O,{handleFilter:function(e){D(e.target.value)}})),r.a.createElement("h2",null,"Add new number"),r.a.createElement("div",null,r.a.createElement(v,{addPerson:function(e){if(e.preventDefault(),t.find((function(e){return e.name===m}))){if(window.confirm("".concat(m," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===m})),a=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(t,!0).forEach((function(n){Object(l.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},n,{number:N});h(n.id,a).then((function(e){u(t.map((function(t){return t.id!==n.id?t:e}))),f(""),P(""),F("Added new number for ".concat(n.name)),setTimeout((function(){F(null)}),6e3)})).catch((function(e){B("Information of ".concat(n.name," has already been removed from server ")),setTimeout((function(){B(null)}),6e3)}))}f(""),P("")}else{var r={name:m,number:N};s(r).then((function(e){u(t.concat(e)),f(""),P(""),F("Added ".concat(r.name)),setTimeout((function(){F(null)}),6e3)}))}},handleNumberChange:function(e){P(e.target.value)},handleNameChange:function(e){f(e.target.value)},newName:m,newNumber:N})),r.a.createElement("h2",null,"Numbers"),r.a.createElement("table",null,t.filter((function(e){return e.name.toLocaleLowerCase().includes(k)})).map((function(e){return r.a.createElement(E,{key:e.name,person:e.name,number:e.number,removeName:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name))&&b(n.id).then((function(e){F("".concat(n.name," was deleted")),setTimeout((function(){F(null)}),6e3)})).catch((function(e){F("".concat(n.name," was already deleted")),setTimeout((function(){F(null)}),6e3)}))}(e.id)}})}))))};t(37);c.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.46006e70.chunk.js.map